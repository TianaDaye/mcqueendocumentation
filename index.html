<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GyroGoGo Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

    <style>
         /* Header Layout */
         header {
            display: grid;
            grid-template-columns: auto 1fr auto;
            background-color: #33adad; 
            padding: 20px;
            text-align: left;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000; 
        }

        .logo img {
            width: fit-content; 
            height: fit-content;
            padding-left: 500px;
            margin-top: 1px;
        }
        /*
        .search-bar {
            grid-column: 3 / 3;
            margin-right: 100px; /* Increased margin 
            padding-left: 500px;
        }
        
        .search-bar input[type="search"] {
            border-radius: 20px; 
            padding-left: 5px;
        }
        */
        /* Main Content Layout */
        main {
            display: grid;
            grid-template-columns: minmax(0, 1fr) minmax(0, 200px); 
            grid-template-rows: auto; 
            padding: 20px;
            margin-top: 100px; 
            padding-top: 20px; 
        }

        main > * {
            grid-area: 1 / 1; 
        }

        aside.sticky {
            position: -webkit-sticky;
            position: sticky;
            top: 100px; 
            width: fit-content;
            padding: 0 20px;
            height: auto; 
            margin-right: 20px;
            overflow-y: auto; 
        }
        div > section {
            /* max-width: calc(100% - 220px); /* Adjusted max-width to allow space for TOC */
            padding-left: 400px;
        }

        /* Table of Contents */
        nav {
            padding-left: 20px; /* Left align the table of contents */
            margin-right: 20px; /* Added margin */
        }

        nav ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        nav ul li {
            margin-bottom: 5px; /* Add some space between list items */
        }

        nav ul li a {
            color: #33adad; /* Link color */
            text-decoration: none;
            transition: color 0.3s ease; 
            display: block; /* Ensure full clickable area */
            padding: 3px 0; /* Add padding for better clickability */
        }

        nav ul li a:hover,
        nav ul li a.active {
            color: #ddd; 
        }

        section ul li {
            list-style-type: disc;
        }

        /* Highlight current section */
        .highlight {
            background-color: #ffd700; /* Yellow background */
            padding: 0 5px; 
            border-radius: 3px; /* Add some rounded corners */
        }

         /* Loading animation */
         .loading-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background-color: #33adad; /* Loading screen color */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999; /* Ensure it's on top of everything */
        }

        .car {
            width: 50px;
            height: 30px;
            border-radius: 20px;
            background-color: #fff; /* Car color */
            position: absolute;
            left: -50px; /* Start position */
            animation: moveCar 3s linear forwards; /* Animation properties */
        }

        @keyframes moveCar {
            to {
                left: 100%; /* End position */
            }
        }
        
    </style>
</head>
<body>
    <!-- Loading Page -->
    <div class="loading-page">
        <div class="car"></div>
    </div>

    <!-- Header -->
    <header class="bg-blue-primary py-4">
        <div class="container mx-auto flex justify-between items-center">
            <div class="logo">
                <h1>Team McQueen Documentation</h1>
                <img class="logo1" src="#" alt="logo">
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sticky lg:block" id="sidebar">
        <nav>
            <ul>
                <li><a href="/index.html">Home</a></li>
                <li><a href="/frontend.html">Frontend</a></li>
                <li><a href="/database.html">Database</a></li>
                <li><a href="/backend.html">Backend</a></li>
                <li><a href="/endpoints.html">Endpoints</a></li>
                <li><a href="/gps.html">GPS and Firebased Documentation</a></li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="px-4 py-8">
        <div>
            <section>
                <h2 id="home" class="text-xl font-semibold text-blue-primary">Purpose</h2>
                <p>The purpose of this Gyrocar scheduling system is to establish a comprehensive system for Gyrogogo, enabling efficient monitoring of our single-passenger gyrocar fleet's location, availability, and usage. The core objectives include acquiring and securely documenting customer data, facilitating rentals from our fleet, and ensuring proper maintenance through continuous tracking of vehicle locations and usage patterns.</p>
            </section>
            <br>
            <section>
                <h2 id="development" class="text-xl font-semibold text-blue-primary">Development</h2>
                <p>This project uses React, Node.js, and AWS to effortlessly deploy and test the system. By utilizing React's frontend capabilities alongside AWS's robust infrastructure, we ensure consistent testing and deployment processes, fostering compatibility and reliability across environments.</p>
            </section>
            <br>
            <section>
                <h2 id="deployment-plan" class="text-xl font-semibold text-blue-primary"">Deployment Plan</h2>
                <p>
                    <a class="underline" href="https://docs.google.com/document/d/1aStegVL6UQ6slx0jgEJ_AXMHC5_DbesUT6g8Bk-eqwA/edit?usp=sharing" target="_blank">Deployment Plan</a>
                </p> 
            </section>
            <br>
            <section>
                <h2 id="reservation-logic" class="text-xl font-semibold text-blue-primary">Reservation Logic</h2>
                <h4 class="font-bold">Overview</h4>
                <p>The reservation system’s core data source is the CarReservation table in the database. This keeps track of each reservation with properties such as scheduledStartDatetime, scheduledEndDatetime, startStationID, endStationID, customerID, and carID.</p>
                <br>
                <h4 class="font-bold">Searching for Availability</h4>
                <p>The user will specify the conditions for the reservation regarding the start and end times and the start and end stations. Given those parameters, the system will then use that information to determine what cars will be available. It can do this based on knowing where the cars will end after their reservations. For example, if car one has a reservation that starts at 8 am at station one and ends at 1 pm at station two, we can assume that car one will be available to pick up at station two starting at 2 pm (accounting for the 1-hour charging buffer). The system also considers future reservations of car one and ensures that creating a reservation will not invalidate a future reservation. Besides checking that the times of the reservations do not overlap, it will ensure the continuity of the cars being at the proper stations. If a reservation is scheduled to start at station one, a preceding reservation should not have an ending station that differs from that. However, a reservation that ends at the same station as the next one’s starting station would be allowed.</p>
                <br>
                <h4 class="font-bold">Conditions for a Valid Reservation</h4>
                <p>All of the following conditions must be met for a reservation to be considered valid:</p>
                <ul>
                    <li>The reservation times do not overlap with existing reservations</li>
                    <li>The car will have 1 hour of charging before the reservation starts</li>
                    <li>If applicable, the reservation will end at the starting station of the following reservation</li>
                    <li>The car’s status is Ready</li>
                    <li>The customer’s status is Ready</li>
                    <li>The customer’s email and phone number have been verified</li>
                </ul>
                <br>
                <h4 class="font-bold">Reservation Availability Flowchart</h4>
                <p>
                    <a class="underline" href="https://docs.google.com/document/d/1P90in9h-1nuWHkfakhEZa9xZJqOHtOL3Pl9E-l8h-Ow/edit?usp=sharing" target="_blank">Flowchart</a>
                </p>
            </section>
            
        </div>
    </main>

    <script>
        window.addEventListener('load', function () {
            setTimeout(function () {
                var loadingPage = document.querySelector('.loading-page');
                loadingPage.style.display = 'none';
            }, 1000);
        });
        
        function toggleMenu() {
            var sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('hidden');
        }
        
        /*
        function search() {
            var searchTerm = document.querySelector('.search-bar input').value.toLowerCase();
            var sections = document.querySelectorAll('main section');
            var found = false; // Flag to check if the search term is found
        
            sections.forEach(function (section) {
                var nodes = section.childNodes;
        
                nodes.forEach(function (node) {
                    if (node.nodeType === Node.TEXT_NODE) {
                        var content = node.textContent;
                        var regex = new RegExp(searchTerm, 'gi');
        
                        // Check if the search term is found in the content
                        if (content.toLowerCase().includes(searchTerm) && !found) {
                            // Scroll to the section
                            section.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                            found = true; // Update the flag
                        }
        
                        // Highlight the search term
                        var highlightedContent = content.replace(regex, '<span class="highlight">$&</span>');
                        node.parentNode.innerHTML = highlightedContent;
                    }
                });
            });
        }
       
        // Handle keydown event on search input
        document.querySelector('.search-bar input').addEventListener('keydown', function (event) {
            if (event.key === 'Enter') {
                search();
            }
        });
         */
        // Highlight active section in the sidebar
        window.addEventListener('scroll', function () {
            var sections = document.querySelectorAll('main h2');
            var scrollPosition = window.scrollY;
        
            sections.forEach(function (section, index) {
                var top = section.offsetTop - 200; // Adjusted for header
                var bottom = top + section.clientHeight;
        
                if (scrollPosition >= top && scrollPosition < bottom) {
                    // Section is in view
                    document.querySelectorAll('nav ul li a').forEach(function (link) {
                        link.classList.remove('active');
                    });
                    document.querySelectorAll('nav ul li a')[index].classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
